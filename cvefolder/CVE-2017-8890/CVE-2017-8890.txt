CVE Number : CVE-2017-8890
Commit Message : 
dccp/tcp: do not inherit mc_list from parent
Commit Details : 
syzkaller found a way to trigger double frees from ip_mc_drop_socket()

It turns out that leave a copy of parent mc_list at accept() time,
which is very bad.

Very similar to commit 8b485ce69876 ("tcp: do not inherit
fastopen_req from parent")

Initial report from Pray3r, completed by Andrey one.
Thanks a lot to them !

Signed-off-by: Eric Dumazet <edumazet@google.com>
Reported-by: Pray3r <pray3r.z@gmail.com>
Reported-by: Andrey Konovalov <andreyknvl@google.com>
Tested-by: Andrey Konovalov <andreyknvl@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Before patch : 
 		/* listeners have SOCK_RCU_FREE, not the children */
 		sock_reset_flag(newsk, SOCK_RCU_FREE);
 
 		newsk >sk_mark = inet_rsk(req) >ir_mark;
 		atomic64_set(&newsk >sk_cookie,
 			     atomic64_read(&inet_rsk(req) >ir_cookie));
After patch : 
 		/* listeners have SOCK_RCU_FREE, not the children */
 		sock_reset_flag(newsk, SOCK_RCU_FREE);
 
 		inet_sk(newsk) >mc_list = NULL;
 
 		newsk >sk_mark = inet_rsk(req) >ir_mark;
 		atomic64_set(&newsk >sk_cookie,
 			     atomic64_read(&inet_rsk(req) >ir_cookie));
