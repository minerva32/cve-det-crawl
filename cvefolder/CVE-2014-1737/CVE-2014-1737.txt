CVE Number : CVE-2014-1737
Commit Message : 
floppy: ignore kernel-only members in FDRAWCMD ioctl input
Commit Details : 
Always clear out these floppy_raw_cmd struct members after copying the
entire structure from userspace so that the in-kernel version is always
valid and never left in an interdeterminate state.

Signed-off-by: Matthew Daley <mattd@bugfuzz.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Before patch : 
 		return  ENOMEM;
 	*rcmd = ptr;
 	ret = copy_from_user(ptr, param, sizeof(*ptr));
 	if (ret)
 		return  EFAULT;
 	ptr >next = NULL;
 	ptr >buffer_length = 0;
 	param  = sizeof(struct floppy_raw_cmd);
 	if (ptr >cmd_count > 33)
 			/* the command may now also take up the space
 	for (i = 0; i < 16; i  )
 		ptr >reply[i] = 0;
 	ptr >resultcode = 0;
 	ptr >kernel_data = NULL;
 
 	if (ptr >flags & (FD_RAW_READ | FD_RAW_WRITE)) {
 		if (ptr >length <= 0)
After patch : 
 		return  ENOMEM;
 	*rcmd = ptr;
 	ret = copy_from_user(ptr, param, sizeof(*ptr));
 	ptr >next = NULL;
 	ptr >buffer_length = 0;
 	ptr >kernel_data = NULL;
 	if (ret)
 		return  EFAULT;
 	param  = sizeof(struct floppy_raw_cmd);
 	if (ptr >cmd_count > 33)
 			/* the command may now also take up the space
 	for (i = 0; i < 16; i  )
 		ptr >reply[i] = 0;
 	ptr >resultcode = 0;
 
 	if (ptr >flags & (FD_RAW_READ | FD_RAW_WRITE)) {
 		if (ptr >length <= 0)
