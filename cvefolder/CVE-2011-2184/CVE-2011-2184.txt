CVE Number : CVE-2011-2184
Commit Message : 
Set cred->user_ns in key_replace_session_keyring
Commit Details : 
Since this cred was not created with copy_creds(), it needs to get
initialized.  Otherwise use of syscall(__NR_keyctl, KEYCTL_SESSION_TO_PARENT);
can lead to a NULL deref.  Thanks to Robert for finding this.

But introduced by commit 47a150edc2a ("Cache user_ns in struct cred").

Signed-off-by: Serge E. Hallyn <serge.hallyn@canonical.com>
Reported-by: Robert Święcki <robert@swiecki.net>
Cc: David Howells <dhowells@redhat.com>
Cc: stable@kernel.org (2.6.39)
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Before patch : 
 	new > sgid	= old > sgid;
 	new >fsgid	= old >fsgid;
 	new >user	= get_uid(old >user);
 	new >group_info	= get_group_info(old >group_info);
 
 	new >securebits	= old >securebits;
After patch : 
 	new > sgid	= old > sgid;
 	new >fsgid	= old >fsgid;
 	new >user	= get_uid(old >user);
 	new >user_ns	= new >user >user_ns;
 	new >group_info	= get_group_info(old >group_info);
 
 	new >securebits	= old >securebits;
