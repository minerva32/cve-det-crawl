CVE Number : CVE-2019-19527
Commit Message : 
HID: hiddev: do cleanup in failure of opening a device
Commit Details : 
Undo what we did for opening before releasing the memory slice.

Reported-by: syzbot <syzbot+62a1e04fd3ec2abf099e@syzkaller.appspotmail.com>
Cc: Andrey Konovalov <andreyknvl@google.com>
Signed-off-by: Hillf Danton <hdanton@sina.com>
Signed-off-by: Jiri Kosina <jkosina@suse.cz>

Before patch : 
 	hid_hw_power(hid, PM_HINT_NORMAL);
 bail_unlock:
 	mutex_unlock(&hiddev >existancelock);
 bail:
 	file >private_data = NULL;
 	vfree(list);
After patch : 
 	hid_hw_power(hid, PM_HINT_NORMAL);
 bail_unlock:
 	mutex_unlock(&hiddev >existancelock);
 
 	spin_lock_irq(&list >hiddev >list_lock);
 	list_del(&list >node);
 	spin_unlock_irq(&list >hiddev >list_lock);
 bail:
 	file >private_data = NULL;
 	vfree(list);
