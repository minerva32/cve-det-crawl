CVE Number : CVE-2019-19076
Commit Message : 
Revert "nfp: abm: fix memory leak in nfp_abm_u32_knode_replace"
Commit Details : 
This reverts commit 78beef629fd9 ("nfp: abm: fix memory leak in
nfp_abm_u32_knode_replace").

The quoted commit does not fix anything and resulted in a bogus
CVE-2019-19076.

If match is NULL then it is known there is no matching entry in
list, hence, calling nfp_abm_u32_knode_delete() is pointless.

Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
Reviewed-by: John Hurley <john.hurley@netronome.com>

Before patch : 
 	u8 mask, val;
 	int err;
 
 	if (!nfp_abm_u32_check_knode(alink >abm, knode, proto, extack)) {
 		err =  EOPNOTSUPP;
 		goto err_delete;
 	}
 
 	tos_off = proto == htons(ETH_P_IP) ? 16 : 20;
 
 		if ((iter >val & cmask) == (val & cmask) &&
 		    iter >band != knode >res >classid) {
 			NL_SET_ERR_MSG_MOD(extack, "conflict with already offloaded filter");
 			err =  EOPNOTSUPP;
 			goto err_delete;
 		}
 	}
 
 	if (!match) {
 		match = kzalloc(sizeof(*match), GFP_KERNEL);
 		if (!match) {
 			err =  ENOMEM;
 			goto err_delete;
 		}
 
 		list_add(&match >list, &alink >dscp_map);
 	}
 	match >handle = knode >handle;
 
 err_delete:
 	nfp_abm_u32_knode_delete(alink, knode);
 	return err;
 }
 
 static int nfp_abm_setup_tc_block_cb(enum tc_setup_type type,
After patch : 
 	u8 mask, val;
 	int err;
 
 	if (!nfp_abm_u32_check_knode(alink >abm, knode, proto, extack))
 		goto err_delete;
 
 	tos_off = proto == htons(ETH_P_IP) ? 16 : 20;
 
 		if ((iter >val & cmask) == (val & cmask) &&
 		    iter >band != knode >res >classid) {
 			NL_SET_ERR_MSG_MOD(extack, "conflict with already offloaded filter");
 			goto err_delete;
 		}
 	}
 
 	if (!match) {
 		match = kzalloc(sizeof(*match), GFP_KERNEL);
 		if (!match)
 			return  ENOMEM;
 		list_add(&match >list, &alink >dscp_map);
 	}
 	match >handle = knode >handle;
 
 err_delete:
 	nfp_abm_u32_knode_delete(alink, knode);
 	return  EOPNOTSUPP;
 }
 
 static int nfp_abm_setup_tc_block_cb(enum tc_setup_type type,
