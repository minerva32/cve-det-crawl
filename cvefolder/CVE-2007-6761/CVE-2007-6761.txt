CVE Number : CVE-2007-6761
Commit Message : 
V4L/DVB (6751): V4L: Memory leak!  Fix count in videobuf-vmalloc mmap
Commit Details : 
This is pretty serious bug.  map->count is never initialized after the
call to kmalloc making the count start at some random trash value.  The
end result is leaking videobufs.

Also, fix up the debug statements to print unsigned values.

Pushed to http://ifup.org/hg/v4l-dvb too

Signed-off-by: Brandon Philips <bphilips@suse.de>
Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

Before patch : 
 {
 	struct videobuf_mapping *map = vma >vm_private_data;
 
 	dprintk(2,"vm_open %p [count=%d,vma=%08lx %08lx]\n",map,
 		map >count,vma >vm_start,vma >vm_end);
 
 	map >count  ;
 	struct videobuf_queue *q = map >q;
 	int i;
 
 	dprintk(2,"vm_close %p [count=%d,vma=%08lx %08lx]\n",map,
 		map >count,vma >vm_start,vma >vm_end);
 
 	map >count  ;
 	}
 
 	/* create mapping   update buffer list */
 	map = q >bufs[first] >map = kmalloc(sizeof(struct videobuf_mapping),GFP_KERNEL);
 	if (NULL == map)
 		return  ENOMEM;
 
After patch : 
 {
 	struct videobuf_mapping *map = vma >vm_private_data;
 
 	dprintk(2,"vm_open %p [count=%u,vma=%08lx %08lx]\n",map,
 		map >count,vma >vm_start,vma >vm_end);
 
 	map >count  ;
 	struct videobuf_queue *q = map >q;
 	int i;
 
 	dprintk(2,"vm_close %p [count=%u,vma=%08lx %08lx]\n",map,
 		map >count,vma >vm_start,vma >vm_end);
 
 	map >count  ;
 	}
 
 	/* create mapping   update buffer list */
 	map = q >bufs[first] >map = kzalloc(sizeof(struct videobuf_mapping),GFP_KERNEL);
 	if (NULL == map)
 		return  ENOMEM;
 
