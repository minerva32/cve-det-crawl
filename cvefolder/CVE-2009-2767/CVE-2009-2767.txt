CVE Number : CVE-2009-2767
Commit Message : 
posix-timers: Fix oops in clock_nanosleep() with CLOCK_MONOTONIC_RAW
Commit Details : 
Prevent calling do_nanosleep() with clockid
CLOCK_MONOTONIC_RAW, it may cause oops, such as NULL pointer
dereference.

Signed-off-by: Hiroshi Shimamoto <h-shimamoto@ct.jp.nec.com>
Cc: Andrew Morton <akpm@linux-foundation.org>
Cc: Thomas Gleixner <tglx@linutronix.de>
Cc: John Stultz <johnstul@us.ibm.com>
Cc: <stable@kernel.org>
LKML-Reference: <4A764FF3.50607@ct.jp.nec.com>
Signed-off-by: Ingo Molnar <mingo@elte.hu>

Before patch : 
 	return  EOPNOTSUPP;
 }
 
 /*
  * Return nonzero if we know a priori this clockid_t value is bogus.
  */
 		.clock_get = posix_get_monotonic_raw,
 		.clock_set = do_posix_clock_nosettime,
 		.timer_create = no_timer_create,
 	};
 
 	register_posix_clock(CLOCK_REALTIME, &clock_realtime);
After patch : 
 	return  EOPNOTSUPP;
 }
 
 static int no_nsleep(const clockid_t which_clock, int flags,
 		     struct timespec *tsave, struct timespec __user *rmtp)
 {
 	return  EOPNOTSUPP;
 }
 
 /*
  * Return nonzero if we know a priori this clockid_t value is bogus.
  */
 		.clock_get = posix_get_monotonic_raw,
 		.clock_set = do_posix_clock_nosettime,
 		.timer_create = no_timer_create,
 		.nsleep = no_nsleep,
 	};
 
 	register_posix_clock(CLOCK_REALTIME, &clock_realtime);
