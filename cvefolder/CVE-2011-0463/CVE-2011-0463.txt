CVE Number : CVE-2011-0463
Commit Message : 
Treat writes as new when holes span across page boundaries
Commit Details : 
When a hole spans across page boundaries, the next write forces
a read of the block. This could end up reading existing garbage
data from the disk in ocfs2_map_page_blocks. This leads to
non-zero holes. In order to avoid this, mark the writes as new
when the holes span across page boundaries.

Signed-off-by: Goldwyn Rodrigues <rgoldwyn@suse.de>
Signed-off-by: jlbec <jlbec@evilplan.org>

Before patch : 
 	ocfs2_figure_cluster_boundaries(OCFS2_SB(inode >i_sb), cpos,
 					&cluster_start, &cluster_end);
 
 	if (page == wc >w_target_page) {
 		map_from = user_pos & (PAGE_CACHE_SIZE   1);
 		map_to = map_from   user_len;
After patch : 
 	ocfs2_figure_cluster_boundaries(OCFS2_SB(inode >i_sb), cpos,
 					&cluster_start, &cluster_end);
 
 	/* treat the write as new if the a hole/lseek spanned across
 	 * the page boundary.
 	 */
 	new = new | ((i_size_read(inode) <= page_offset(page)) &&
 			(page_offset(page) <= user_pos));
 
 	if (page == wc >w_target_page) {
 		map_from = user_pos & (PAGE_CACHE_SIZE   1);
 		map_to = map_from   user_len;
