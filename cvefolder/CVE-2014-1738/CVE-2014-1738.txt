CVE Number : CVE-2014-1738
Commit Message : 
floppy: don't write kernel-only members to FDRAWCMD ioctl output
Commit Details : 
Do not leak kernel-only floppy_raw_cmd structure members to userspace.
This includes the linked-list pointer and the pointer to the allocated
DMA space.

Signed-off-by: Matthew Daley <mattd@bugfuzz.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Before patch : 
 	int ret;
 
 	while (ptr) {
 		ret = copy_to_user(param, ptr, sizeof(*ptr));
 		if (ret)
 			return  EFAULT;
 		param  = sizeof(struct floppy_raw_cmd);
After patch : 
 	int ret;
 
 	while (ptr) {
 		struct floppy_raw_cmd cmd = *ptr;
 		cmd.next = NULL;
 		cmd.kernel_data = NULL;
 		ret = copy_to_user(param, &cmd, sizeof(cmd));
 		if (ret)
 			return  EFAULT;
 		param  = sizeof(struct floppy_raw_cmd);
