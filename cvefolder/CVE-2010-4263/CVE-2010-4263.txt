CVE Number : CVE-2010-4263
Commit Message : 
igb: only use vlan_gro_receive if vlans are registered
Commit Details : 
This change makes it so that vlan_gro_receive is only used if vlans have been
registered to the adapter structure.  Previously we were just sending all vlan
tagged frames in via this function but this results in a null pointer
dereference when vlans are not registered.

 This fixes bugzilla entry 15582 -Eric Dumazet

Signed-off-by: Alexander Duyck <alexander.h.duyck@intel.com>
Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
Acked-by: Eric Dumazet <eric.dumazet@gmail.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Before patch : 
 {
 	struct igb_adapter *adapter = q_vector >adapter;
 
 	if (vlan_tag)
 		vlan_gro_receive(&q_vector >napi, adapter >vlgrp,
 		                 vlan_tag, skb);
 	else
After patch : 
 {
 	struct igb_adapter *adapter = q_vector >adapter;
 
 	if (vlan_tag && adapter >vlgrp)
 		vlan_gro_receive(&q_vector >napi, adapter >vlgrp,
 		                 vlan_tag, skb);
 	else
