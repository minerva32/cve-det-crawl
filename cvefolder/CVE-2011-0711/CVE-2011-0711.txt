CVE Number : CVE-2011-0711
Commit Message : 
xfs: prevent leaking uninitialized stack memory in FSGEOMETRY_V1
Commit Details : 
The FSGEOMETRY_V1 ioctl (and its compat equivalent) calls out to
xfs_fs_geometry() with a version number of 3.  This code path does not
fill in the logsunit member of the passed xfs_fsop_geom_t, leading to
the leaking of four bytes of uninitialized stack data to potentially
unprivileged callers.

v2 switches to memset() to avoid future issues if structure members
change, on suggestion of Dave Chinner.

Signed-off-by: Dan Rosenberg <drosenberg@vsecurity.com>
Reviewed-by: Eugene Teo <eugeneteo@kernel.org>
Signed-off-by: Alex Elder <aelder@sgi.com>

Before patch : 
 	xfs_fsop_geom_t		*geo,
 	int			new_version)
 {
 	geo >blocksize = mp >m_sb.sb_blocksize;
 	geo >rtextsize = mp >m_sb.sb_rextsize;
 	geo >agblocks = mp >m_sb.sb_agblocks;
After patch : 
 	xfs_fsop_geom_t		*geo,
 	int			new_version)
 {
 
 	memset(geo, 0, sizeof(*geo));
 
 	geo >blocksize = mp >m_sb.sb_blocksize;
 	geo >rtextsize = mp >m_sb.sb_rextsize;
 	geo >agblocks = mp >m_sb.sb_agblocks;
