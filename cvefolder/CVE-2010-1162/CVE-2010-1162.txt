CVE Number : CVE-2010-1162
Commit Message : 
tty: release_one_tty() forgets to put pids
Commit Details : 
release_one_tty(tty) can be called when tty still has a reference
to pgrp/session. In this case we leak the pid.

Signed-off-by: Oleg Nesterov <oleg@redhat.com>
Reported-by: Catalin Marinas <catalin.marinas@arm.com>
Reported-and-tested-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Acked-by: Linus Torvalds <torvalds@linux-foundation.org>
Acked-by: Eric W. Biederman <ebiederm@xmission.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Before patch : 
 	list_del_init(&tty >tty_files);
 	file_list_unlock();
 
 	free_tty_struct(tty);
 }
 
After patch : 
 	list_del_init(&tty >tty_files);
 	file_list_unlock();
 
 	put_pid(tty >pgrp);
 	put_pid(tty >session);
 	free_tty_struct(tty);
 }
 
