CVE Number : CVE-2005-3108
Commit Message : 
PATCH x86_64: Don't look up struct page pointer of physical address in iounmap
Commit Details : 
It could be in a memory hole not mapped in mem_map and that causes the hash
lookup to go off to nirvana.

Signed-off-by: Andi Kleen <ak@suse.de>
Signed-off-by: Andrew Morton <akpm@osdl.org>
Signed-off-by: Linus Torvalds <torvalds@osdl.org>

Before patch : 
 	if ((p >flags >> 20) &&
 		p >phys_addr   p >size   1 < virt_to_phys(high_memory)) {
 		/* p >size includes the guard page, but cpa doesn't like that */
 		change_page_attr(virt_to_page(__va(p >phys_addr)),
 				 p >size >> PAGE_SHIFT,
 				 PAGE_KERNEL);
 		global_flush_tlb();
After patch : 
 	if ((p >flags >> 20) &&
 		p >phys_addr   p >size   1 < virt_to_phys(high_memory)) {
 		/* p >size includes the guard page, but cpa doesn't like that */
 		change_page_attr_addr((unsigned long)__va(p >phys_addr),
 				 p >size >> PAGE_SHIFT,
 				 PAGE_KERNEL);
 		global_flush_tlb();
