CVE Number : CVE-2015-6526
Commit Message : 
powerpc/perf: Cap 64bit userspace backtraces to PERF_MAX_STACK_DEPTH
Commit Details : 
We cap 32bit userspace backtraces to PERF_MAX_STACK_DEPTH
(currently 127), but we forgot to do the same for 64bit backtraces.

Cc: stable@vger.kernel.org
Signed-off-by: Anton Blanchard <anton@samba.org>
Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>

Before patch : 
 	sp = regs >gpr[1];
 	perf_callchain_store(entry, next_ip);
 
 	for (;;) {
 		fp = (unsigned long __user *) sp;
 		if (!valid_user_sp(sp, 1) || read_user_stack_64(fp, &next_sp))
 			return;
After patch : 
 	sp = regs >gpr[1];
 	perf_callchain_store(entry, next_ip);
 
 	while (entry >nr < PERF_MAX_STACK_DEPTH) {
 		fp = (unsigned long __user *) sp;
 		if (!valid_user_sp(sp, 1) || read_user_stack_64(fp, &next_sp))
 			return;
