CVE Number : CVE-2019-15219
Commit Message : 
USB: sisusbvga: fix oops in error path of sisusb_probe
Commit Details : 
The pointer used to log a failure of usb_register_dev() must
be set before the error is logged.

v2: fix that minor is not available before registration

Signed-off-by: oliver Neukum <oneukum@suse.com>
Reported-by: syzbot+a0cbdbd6d169020c8959@syzkaller.appspotmail.com
Fixes: 7b5cd5fefbe02 ("USB: SisUSB2VGA: Convert printk to dev_* macros")
Cc: stable <stable@vger.kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

Before patch : 
 
 	mutex_init(&(sisusb >lock));
 
 	/* Register device */
 	retval = usb_register_dev(intf, &usb_sisusb_class);
 	if (retval) {
 		goto error_1;
 	}
 
 	sisusb >sisusb_dev = dev;
 	sisusb >minor      = intf >minor;
 	sisusb >vrambase   = SISUSB_PCI_MEMBASE;
 	sisusb >mmiobase   = SISUSB_PCI_MMIOBASE;
 	sisusb >mmiosize   = SISUSB_PCI_MMIOSIZE;
 	sisusb >ioportbase = SISUSB_PCI_IOPORTBASE;
 	/* Everything else is zero */
 
 	/* Allocate buffers */
 	sisusb >ibufsize = SISUSB_IBUF_SIZE;
After patch : 
 
 	mutex_init(&(sisusb >lock));
 
 	sisusb >sisusb_dev = dev;
 	sisusb >vrambase   = SISUSB_PCI_MEMBASE;
 	sisusb >mmiobase   = SISUSB_PCI_MMIOBASE;
 	sisusb >mmiosize   = SISUSB_PCI_MMIOSIZE;
 	sisusb >ioportbase = SISUSB_PCI_IOPORTBASE;
 	/* Everything else is zero */
 
 	/* Register device */
 	retval = usb_register_dev(intf, &usb_sisusb_class);
 	if (retval) {
 		goto error_1;
 	}
 
 	sisusb >minor = intf >minor;
 
 	/* Allocate buffers */
 	sisusb >ibufsize = SISUSB_IBUF_SIZE;
